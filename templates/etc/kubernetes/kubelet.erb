### file managed by puppet
# kubernetes kubelet (minion) config

# The address for the info server to serve on (set to 0.0.0.0 or "" for all interfaces)
# KUBELET_ADDRESS="--address=<%= scope['kubernetes::node::kubelet::address'] %>"

# The port for the info server to serve on
# KUBELET_PORT="--port=<%= scope['kubernetes::node::kubelet::port'] %>"

# You may leave this blank to use the actual hostname
KUBELET_HOSTNAME="--hostname-override=<%= scope['kubernetes::node::kubelet::hostname_override'] %>"

# location of the api-server
<% if @api_servers -%>
KUBELET_API_SERVER="--api-servers=<%= Array(scope['kubernetes::node::kubelet::api_servers']).join(',') %>" 
<% end -%>

# Add your own!
KUBELET_ARGS="<% -%>
<% if @allow_privileged -%>
 --allow-privileged=<%= scope['kubernetes::node::kubelet::allow_privileged'] -%>
<% end -%>
<% unless [nil, :undefined, :undef, ''].include?(scope.lookupvar('kubernetes::node::kubelet::anonymous_auth')) -%>
 --anonymous-auth=<%= scope['kubernetes::node::kubelet::anonymous_auth'] -%>
<% end -%>
<% if @authentication_token_webhook -%>
 --authentication-token-webhook=<%= scope['kubernetes::node::kubelet::authentication_token_webhook'] -%>
<% end -%>
<% if @authentication_token_webhook_cache_ttl -%>
 --authentication-token-webhook-cache-ttl=<%= scope['kubernetes::node::kubelet::authentication_token_webhook_cache_ttl'] -%>
<% end -%>
<% if @authorization_mode -%>
 --authorization-mode=<%= scope['kubernetes::node::kubelet::authorization_mode'] -%>
<% end -%>
<% if @authorization_webhook_cache_authorized_ttl -%>
 --authorization-webhook-cache-authorized-ttl=<%= scope['kubernetes::node::kubelet::authorization_webhook_cache_authorized_ttl'] -%>
<% end -%>
<% if @authorization_webhook_cache_unauthorized_ttl -%>
 --authorization-webhook-cache-unauthorized-ttl=<%= scope['kubernetes::node::kubelet::authorization_webhook_cache_unauthorized_ttl'] -%>
<% end -%>
<% if @cadvisor_port -%>
 --cadvisor-port=<%= scope['kubernetes::node::kubelet::cadvisor_port'] -%>
<% end -%>
<% if @cert_dir -%>
 --cert-dir=<%= scope['kubernetes::node::kubelet::cert_dir'] -%>
<% end -%>
<% if @cgroup_driver -%>
 --cgroup-driver=<%= scope['kubernetes::node::kubelet::cgroup_driver'] -%>
<% end -%>
<% if @cgroup_root -%>
 --cgroup-root=<%= scope['kubernetes::node::kubelet::cgroup_root'] -%>
<% end -%>
<% if @chaos_chance -%>
 --chaos-chance=<%= scope['kubernetes::node::kubelet::chaos_chance'] -%>
<% end -%>
<% if @client_ca_file -%>
 --client-ca-file=<%= scope['kubernetes::node::kubelet::client_ca_file'] -%>
<% end -%>
<% if @cloud_config -%>
 --cloud-config=<%= scope['kubernetes::node::kubelet::cloud_config'] -%>
<% end -%>
<% if @cloud_provider -%>
 --cloud-provider=<%= scope['kubernetes::node::kubelet::cloud_provider'] -%>
<% end -%>
<% if @cluster_dns -%>
 --cluster-dns=<%= scope['kubernetes::node::kubelet::cluster_dns'] -%>
<% end -%>
<% if @cluster_domain -%>
 --cluster-domain=<%= scope['kubernetes::node::kubelet::cluster_domain'] -%>
<% end -%>
<% if @config -%>
 --config=<%= scope['kubernetes::node::kubelet::config'] -%>
<% end -%>
<% if @container_runtime -%>
 --container-runtime=<%= scope['kubernetes::node::kubelet::container_runtime'] -%>
<% end -%>
<% if @container_runtime_endpoint -%>
 --container-runtime-endpoint=<%= scope['kubernetes::node::kubelet::container_runtime_endpoint'] -%>
<% end -%>
<% unless [nil, :undefined, :undef, ''].include?(scope.lookupvar('kubernetes::node::kubelet::containerized')) -%>
 --containerized=<%= scope['kubernetes::node::kubelet::containerized'] -%>
<% end -%>
<% unless [nil, :undefined, :undef, ''].include?(scope.lookupvar('kubernetes::node::kubelet::cpu_cfs_quota')) -%>
 --cpu-cfs-quota=<%= scope['kubernetes::node::kubelet::cpu_cfs_quota'] -%>
<% end -%>
<% if @docker_endpoint -%>
 --docker-endpoint=<%= scope['kubernetes::node::kubelet::docker_endpoint'] -%>
<% end -%>
<% if @docker_exec_handler -%>
 --docker-exec-handler=<%= scope['kubernetes::node::kubelet::docker_exec_handler'] -%>
<% end -%>
<% unless [nil, :undefined, :undef, ''].include?(scope.lookupvar('kubernetes::node::kubelet::enable_controller_attach_detach')) -%>
 --enable-controller-attach-detach=<%= scope['kubernetes::node::kubelet::enable_controller_attach_detach'] -%>
<% end -%>
<% unless [nil, :undefined, :undef, ''].include?(scope.lookupvar('kubernetes::node::kubelet::enable_custom_metrics')) -%>
 --enable-custom-metrics=<%= scope['kubernetes::node::kubelet::enable_custom_metrics'] -%>
<% end -%>
<% unless [nil, :undefined, :undef, ''].include?(scope.lookupvar('kubernetes::node::kubelet::enable_debugging_handlers')) -%>
 --enable-debugging-handlers=<%= scope['kubernetes::node::kubelet::enable_debugging_handlers'] -%>
<% end -%>
<% unless [nil, :undefined, :undef, ''].include?(scope.lookupvar('kubernetes::node::kubelet::enable_server')) -%>
 --enable-server=<%= scope['kubernetes::node::kubelet::enable_server'] -%>
<% end -%>
<% if @event_burst -%>
 --event-burst=<%= scope['kubernetes::node::kubelet::event_burst'] -%>
<% end -%>
<% if @event_qps -%>
 --event-qps=<%= scope['kubernetes::node::kubelet::event_qps'] -%>
<% end -%>
<% if @eviction_hard -%>
 --eviction-hard=<%= scope['kubernetes::node::kubelet::eviction_hard'] -%>
<% end -%>
<% if @eviction_max_pod_grace_period -%>
 --eviction-max-pod-grace-period=<%= scope['kubernetes::node::kubelet::eviction_max_pod_grace_period'] -%>
<% end -%>
<% if @eviction_minimum_reclaim -%>
 --eviction-minimum-reclaim=<%= scope['kubernetes::node::kubelet::eviction_minimum_reclaim'] -%>
<% end -%>
<% if @eviction_pressure_transition_period -%>
 --eviction-pressure-transition-period=<%= scope['kubernetes::node::kubelet::eviction_pressure_transition_period'] -%>
<% end -%>
<% if @eviction_soft -%>
 --eviction-soft=<%= scope['kubernetes::node::kubelet::eviction_soft'] -%>
<% end -%>
<% if @eviction_soft_grace_period -%>
 --eviction-soft-grace-period=<%= scope['kubernetes::node::kubelet::eviction_soft_grace_period'] -%>
<% end -%>
<% if @exit_on_lock_contention -%>
 --exit-on-lock-contention=<%= scope['kubernetes::node::kubelet::exit_on_lock_contention'] -%>
<% end -%>
<% if @experimental_allowed_unsafe_sysctls -%>
  --experimental-allowed-unsafe-sysctls=<%= scope['kubernetes::node::kubelet::experimental_allowed_unsafe_sysctls'] -%>
<% end -%>
<% if @bootstrap_kubeconfig -%>
  --bootstrap-kubeconfig=<%= scope['kubernetes::node::kubelet::bootstrap_kubeconfig'] -%>
<% end -%>
<% if @experimental_cgroups_per_qos -%>
  --experimental-cgroups-per-qos=<%= scope['kubernetes::node::kubelet::experimental_cgroups_per_qos'] -%>
<% end -%>
<% if @experimental_check_node_capabilities_before_mount -%>
  --experimental-check-node-capabilities-before-mount=<%= scope['kubernetes::node::kubelet::experimental_check_node_capabilities_before_mount'] -%>
<% end -%>
<% if @experimental_cri -%>
  --experimental-cri=<%= scope['kubernetes::node::kubelet::experimental_cri'] -%>
<% end -%>
<% if @experimental_fail_swap_on -%>
  --experimental-fail-swap-on=<%= scope['kubernetes::node::kubelet::experimental_fail_swap_on'] -%>
<% end -%>
<% if @experimental_kernel_memcg_notification -%>
  --experimental-kernel-memcg-notification=<%= scope['kubernetes::node::kubelet::experimental_kernel_memcg_notification'] -%>
<% end -%>
<% if @experimental_mounter_path -%>
  --experimental-mounter-path=<%= scope['kubernetes::node::kubelet::experimental_mounter_path'] -%>
<% end -%>
<% if @file_check_frequency -%>
 --file-check-frequency=<%= scope['kubernetes::node::kubelet::file_check_frequency'] -%>
<% end -%>
<% if @google_json_key -%>
 --google-json-key=<%= scope['kubernetes::node::kubelet::google_json_key'] -%>
<% end -%>
<% if @hairpin_mode -%>
 --hairpin-mode=<%= scope['kubernetes::node::kubelet::hairpin_mode'] -%>
<% end -%>
<% if @healthz_bind_address -%>
 --healthz-bind-address=<%= scope['kubernetes::node::kubelet::healthz_bind_address'] -%>
<% end -%>
<% if @healthz_port -%>
 --healthz-port=<%= scope['kubernetes::node::kubelet::healthz_port'] -%>
<% end -%>
<% if @host_ipc_sources -%>
 --host-ipc-sources=<%= scope['kubernetes::node::kubelet::host_ipc_sources'] -%>
<% end -%>
<% if @host_network_sources -%>
 --host-network-sources=<%= scope['kubernetes::node::kubelet::host_network_sources'] -%>
<% end -%>
<% if @host_pid_sources -%>
 --host-pid-sources=<%= scope['kubernetes::node::kubelet::host_pid_sources'] -%>
<% end -%>
<% if @http_check_frequency -%>
 --http-check-frequency=<%= scope['kubernetes::node::kubelet::http_check_frequency'] -%>
<% end -%>
<% if @image_gc_high_threshold -%>
 --image-gc-high-threshold=<%= scope['kubernetes::node::kubelet::image_gc_high_threshold'] -%>
<% end -%>
<% if @image_gc_low_threshold -%>
 --image-gc-low-threshold=<%= scope['kubernetes::node::kubelet::image_gc_low_threshold'] -%>
<% end -%>
<% if @image_service_endpoint -%>
 --image_service_endpoint=<%= scope['kubernetes::node::kubelet::image_service_endpoint'] -%>
<% end -%>
<% if @iptables_drop_bit -%>
 --iptables-drop-bit=<%= scope['kubernetes::node::kubelet::iptables_drop_bit'] -%>
<% end -%>
<% if @iptables_masquerade_bit -%>
 --iptables-masquerade-bit=<%= scope['kubernetes::node::kubelet::iptables_masquerade_bit'] -%>
<% end -%>
<% if @kube_api_burst -%>
 --kube-api-burst=<%= scope['kubernetes::node::kubelet::kube_api_burst'] -%>
<% end -%>
<% if @kube_api_content_type -%>
 --kube-api-content-type=<%= scope['kubernetes::node::kubelet::kube_api_content_type'] -%>
<% end -%>
<% if @kube_api_qps -%>
 --kube-api-qps=<%= scope['kubernetes::node::kubelet::kube_api_qps'] -%>
<% end -%>
<% if @kube_reserved -%>
 --kube-reserved=<%= scope['kubernetes::node::kubelet::kube_reserved'] -%>
<% end -%>
<% if @kubeconfig -%>
 --kubeconfig=<%= scope['kubernetes::node::kubelet::kubeconfig'] -%>
<% end -%>
<% if @kubelet_cgroups -%>
 --kubelet-cgroups=<%= scope['kubernetes::node::kubelet::kubelet_cgroups'] -%>
<% end -%>
<% if @lock_file -%>
 --lock-file=<%= scope['kubernetes::node::kubelet::lock_file'] -%>
<% end -%>
<% if @low_diskspace_threshold_mb -%>
 --low-diskspace-threshold-mb=<%= scope['kubernetes::node::kubelet::low_diskspace_threshold_mb'] -%>
<% end -%>
<% if @make_iptables_util_chains -%>
 --make-iptables-util-chains=<%= scope['kubernetes::node::kubelet::make_iptables_util_chains'] -%>
<% end -%>
<% if @manifest_url -%>
 --manifest-url=<%= scope['kubernetes::node::kubelet::manifest_url'] -%>
<% end -%>
<% if @manifest_url_header -%>
 --manifest-url-header=<%= scope['kubernetes::node::kubelet::manifest_url_header'] -%>
<% end -%>
<% if @master_service_namespace -%>
 --master-service-namespace=<%= scope['kubernetes::node::kubelet::master_service_namespace'] -%>
<% end -%>
<% if @max_open_files -%>
 --max-open-files=<%= scope['kubernetes::node::kubelet::max_open_files'] -%>
<% end -%>
<% if @max_pods -%>
 --max-pods=<%= scope['kubernetes::node::kubelet::max_pods'] -%>
<% end -%>
<% if @minimum_image_ttl_duration -%>
 --minimum-image-ttl-duration=<%= scope['kubernetes::node::kubelet::minimum_image_ttl_duration'] -%>
<% end -%>
<% if @node_ip -%>
 --node-ip=<%= scope['kubernetes::node::kubelet::node_ip'] -%>
<% end -%>
<% if @node_labels -%>
 --node-labels=<%= scope['kubernetes::node::kubelet::node_labels'] -%>
<% end -%>
<% if @node_status_update_frequency -%>
 --node-status-update-frequency=<%= scope['kubernetes::node::kubelet::node_status_update_frequency'] -%>
<% end -%>
<% if @non_masquerade_cidr -%>
 --non-masquerade-cidr=<%= scope['kubernetes::node::kubelet::non_masquerade_cidr'] -%>
<% end -%>
<% if @oom_score_adj -%>
 --oom-score-adj=<%= scope['kubernetes::node::kubelet::oom_score_adj'] -%>
<% end -%>
<%if @outofdisk_transition_frequency -%>
 --outofdisk-transition-frequency=<%= scope['kubernetes::node::kubelet::outofdisk_transition_frequency'] -%>
<% end -%>
<% if @pod_cidr -%>
 --pod-cidr=<%= scope['kubernetes::node::kubelet::pod_cidr'] -%>
<% end -%>
<% if @pod_infra_container_image -%>
 --pod-infra-container-image=<%= scope['kubernetes::node::kubelet::pod_infra_container_image'] -%>
<% end -%>
<% if @pod_manifest_path -%>
 --pod-manifest-path=<%= scope['kubernetes::node::kubelet::pod_manifest_path'] -%>
<% end -%>
<% if @pods_per_core -%>
 --pods-per-core=<%= scope['kubernetes::node::kubelet::pods_per_core'] -%>
<% end -%>
<% if @protect_kernel_defaults -%>
 --protect-kernel-defaults=<%= scope['kubernetes::node::kubelet::protect_kernel_defaults'] -%>
<% end -%>
<% if @register_node -%>
 --register-node=<%= scope['kubernetes::node::kubelet::register_node'] -%>
<% end -%>
<% unless [nil, :undefined, :undef, ''].include?(scope.lookupvar('kubernetes::node::kubelet::register_schedulable')) -%>
 --register-schedulable=<%= scope['kubernetes::node::kubelet::register_schedulable'] -%>
<% end -%>
<% if @registry_burst -%>
 --registry-burst=<%= scope['kubernetes::node::kubelet::registry_burst'] -%>
<% end -%>
<% if @registry_qps -%>
 --registry-qps=<%= scope['kubernetes::node::kubelet::registry_qps'] -%>
<% end -%>
<% unless [nil, :undefined, :undef, ''].include?(scope.lookupvar('kubernetes::node::kubelet::require_kubeconfig')) -%>
 --require-kubeconfig=<%= scope['kubernetes::node::kubelet::require_kubeconfig'] -%>
<% end -%>
<% if @resolv_conf -%>
 --resolv-conf=<%= scope['kubernetes::node::kubelet::resolv_conf'] -%>
<% end -%>
<% if @rkt_api_endpoint -%>
 --rkt-api-endpoint=<%= scope['kubernetes::node::kubelet::rkt_api_endpoint'] -%>
<% end -%>
<% if @rkt_path -%>
 --rkt-path=<%= scope['kubernetes::node::kubelet::rkt_path'] -%>
<% end -%>
<% if @root_dir -%>
 --root-dir=<%= scope['kubernetes::node::kubelet::root_dir'] -%>
<% end -%>
<% unless [nil, :undefined, :undef, ''].include?(scope.lookupvar('kubernetes::node::kubelet::runonce')) -%>
 --runonce=<%= scope['kubernetes::node::kubelet::runonce'] -%>
<% end -%>
<% if @runtime_cgroups -%>
 --runtime-cgroups=<%= scope['kubernetes::node::kubelet::runtime_cgroups'] -%>
<% end -%>
<% if @runtime_request_timeout -%>
 --runtime-request-timeout=<%= scope['kubernetes::node::kubelet::runtime_request_timeout'] -%>
<% end -%>
<% if @seccomp_profile_root -%>
 --seccomp-profile-root=<%= scope['kubernetes::node::kubelet::seccomp_profile_root'] -%>
<% end -%>
<% if @serialize_image_pulls -%>
 --serialize-image-pulls=<%= scope['kubernetes::node::kubelet::serialize_image_pulls'] -%>
<% end -%>
<% if @streaming_connection_idle_timeout -%>
 --streaming-connection-idle-timeout=<%= scope['kubernetes::node::kubelet::streaming_connection_idle_timeout'] -%>
<% end -%>
<% if @sync_frequency -%>
 --sync-frequency=<%= scope['kubernetes::node::kubelet::sync_frequency'] -%>
<% end -%>
<% if @system_cgroups -%>
 --system-cgroups=<%= scope['kubernetes::node::kubelet::system_cgroups'] -%>
<% end -%>
<% if @system_reserved -%>
 --system-reserved=<%= scope['kubernetes::node::kubelet::system_reserved'] -%>
<% end -%>
<% if @tls_cert_file -%>
 --tls-cert-file=<%= scope['kubernetes::node::kubelet::tls_cert_file'] -%>
<% end -%>
<% if @tls_private_key_file -%>
 --tls-private-key-file=<%= scope['kubernetes::node::kubelet::tls_private_key_file'] -%>
<% end -%>
<% if @volume_stats_agg_period -%>
 --volume-stats-agg-period=<%= scope['kubernetes::node::kubelet::volume_stats_agg_period'] -%>
<% end -%>
<% if @cni_bin_dir -%>
 --cni-bin-dir=<%= scope['kubernetes::node::kubelet::cni_bin_dir'] -%>
<% end -%>
<% if @cni_conf_dir -%>
 --cni-conf-dir=<%= scope['kubernetes::node::kubelet::cni_conf_dir'] -%>
<% end -%>
<% if @network_plugin -%>
 --network-plugin=<%= scope['kubernetes::node::kubelet::network_plugin'] -%>
<% end -%>
 --v=<%= scope['kubernetes::node::kubelet::verbosity'] -%>
 <%= scope['kubernetes::node::kubelet::extra_args'] -%>
"
